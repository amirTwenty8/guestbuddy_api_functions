{
	"info": {
		"_postman_id": "6e7e7e7e-7e7e-7e7e-7e7e-7e7e7e7e7e7e",
		"name": "GuestBuddy API Tests",
		"description": "Tests for GuestBuddy API Functions - Now uses document IDs for better data integrity",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create Account",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"firstName\": \"John\",\n        \"lastName\": \"Doe\",\n        \"email\": \"john.doe@example.com\",\n        \"phoneNumber\": \"+46732010328\",\n        \"birthDate\": \"1990-01-15\",\n        \"country\": \"Sweden\",\n        \"city\": \"Stockholm\",\n        \"password\": \"securePassword123\",\n        \"terms\": true\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/createAccount",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"createAccount"
					]
				},
				"description": "Create a new user account with Firebase Auth and save additional user data to Firestore. No authentication required."
			},
			"response": []
		},
		{
			"name": "Verify Email",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"email\": \"john.doe@example.com\",\n        \"verificationCode\": \"123456\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/verifyEmail",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"verifyEmail"
					]
				},
				"description": "Verify email with 6-digit verification code. No authentication required."
			},
			"response": []
		},
		{
			"name": "Resend Verification Email",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"email\": \"john.doe@example.com\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/resendVerificationEmail",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"resendVerificationEmail"
					]
				},
				"description": "Resend verification email to user. No authentication required."
			},
			"response": []
		},
		{
			"name": "Create Event",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"test-event-{{$timestamp}}\",\n        \"eventName\": \"Test Event\",\n        \"startDateTime\": \"{{$isoTimestamp}}\",\n        \"endDateTime\": \"{{$isoTimestamp}}\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"tableLayouts\": [\"layout_document_id_1\", \"layout_document_id_2\"],\n        \"categories\": [\"category_document_id_1\", \"category_document_id_2\"],\n        \"clubCardIds\": [\"clubcard_document_id_1\", \"clubcard_document_id_2\"],\n        \"eventGenre\": [\"genre_document_id_1\", \"genre_document_id_2\"]\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/createEvent",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"createEvent"
					]
				},
				"description": "Create a new event with document IDs for tableLayouts, categories, clubCardIds, and eventGenre. The function will fetch the names from these documents and store both IDs and names in the event."
			},
			"response": []
		},
		{
			"name": "Update Event - Full Update",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"eventName\": \"Updated Event Name\",\n        \"startDateTime\": \"{{$isoTimestamp}}\",\n        \"endDateTime\": \"{{$isoTimestamp}}\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"tableLayouts\": [\"layout_document_id_1\", \"layout_document_id_3\"],\n        \"categories\": [\"category_document_id_1\"],\n        \"clubCardIds\": [\"clubcard_document_id_1\"],\n        \"eventGenre\": [\"genre_document_id_1\"]\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/updateEvent",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"updateEvent"
					]
				},
				"description": "Full update of an existing event with all fields. The function will automatically calculate which layouts to add/remove and update table summary statistics."
			},
			"response": []
		},
		{
			"name": "Update Event - Name Only",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"eventName\": \"Updated Event Name\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/updateEvent",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"updateEvent"
					]
				},
				"description": "Partial update - only update the event name. Other fields remain unchanged."
			},
			"response": []
		},
		{
			"name": "Update Event - Table Layouts Only",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"tableLayouts\": [\"layout_document_id_1\", \"layout_document_id_3\"]\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/updateEvent",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"updateEvent"
					]
				},
				"description": "Partial update - only update table layouts. The function will calculate which layouts to add/remove and update table summary statistics."
			},
			"response": []
		},
		{
			"name": "Delete Event",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/deleteEvent",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"deleteEvent"
					]
				},
				"description": "Delete an event and all its subcollections (guest_lists, table_lists). This operation is irreversible."
			},
			"response": []
		},
		{
			"name": "Add Guest",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"guestName\": \"John Doe\",\n        \"normalGuests\": 2,\n        \"freeGuests\": 1,\n        \"comment\": \"VIP guest with special requirements\",\n        \"categories\": [\"VIP\"],\n        \"selectedUserId\": \"optional-user-id-from-search\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/addGuest",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"addGuest"
					]
				},
				"description": "Add a guest to an event's guest list. Automatically updates guest list summary statistics and adds guest to company guests. If selectedUserId is provided, uses existing user ID; otherwise generates new user ID."
			},
			"response": []
		},
		{
			"name": "Add Multiple Guests",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"guestsText\": \"John Doe +2 +3\\nJane Smith +1 +2\\nBob Johnson +0 +1\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/addMultipleGuests",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"addMultipleGuests"
					]
				},
				"description": "Add multiple guests from text input. Format: 'FirstName LastName +free +paid'. Parses each line and creates individual guest entries."
			},
			"response": []
		},
		{
			"name": "Save Guest Draft",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"draftText\": \"John Doe +2 +3\\nJane Smith +1 +2\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/saveGuestDraft",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"saveGuestDraft"
					]
				},
				"description": "Save a draft for multiple guests. Stores the draft text in the user's document for later retrieval."
			},
			"response": []
		},

		{
			"name": "Clear Guest Draft",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/clearGuestDraft",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"clearGuestDraft"
					]
				},
				"description": "Clear a saved draft for multiple guests. Removes the draft text from the user's document."
			},
			"response": []
		},
		{
			"name": "Update Guest",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"guestId\": \"existing-guest-id\",\n        \"guestName\": \"Updated Guest Name\",\n        \"normalGuests\": 3,\n        \"freeGuests\": 1,\n        \"comment\": \"Updated comment\",\n        \"categories\": [\"VIP\"]\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/updateGuest",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"updateGuest"
					]
				},
				"description": "Update an existing guest's details. Supports partial updates - only send the fields you want to change. Automatically recalculates summary statistics and logs changes."
			},
			"response": []
		},
		{
			"name": "Check In Guest (Increment)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"guestId\": \"existing-guest-id\",\n        \"normalIncrement\": 1,\n        \"freeIncrement\": 0,\n        \"action\": \"increment\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/checkInGuest",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"checkInGuest"
					]
				},
				"description": "Check in guests using increment mode (for rapid tapping). Adds to existing check-in counts."
			},
			"response": []
		},
		{
			"name": "Check In Guest (Set)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"data\": {\n        \"eventId\": \"existing-event-id\",\n        \"companyId\": \"YOUR_COMPANY_ID\",\n        \"guestId\": \"existing-guest-id\",\n        \"normalCheckedIn\": 3,\n        \"freeCheckedIn\": 1,\n        \"action\": \"set\"\n    }\n}"
				},
				"url": {
					"raw": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net/checkInGuest",
					"protocol": "https",
					"host": [
						"us-central1-guestbuddy-test-3b36d",
						"cloudfunctions",
						"net"
					],
					"path": [
						"checkInGuest"
					]
				},
				"description": "Set specific check-in counts (for manual editing). Directly sets the check-in values."
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "PASTE_YOUR_FIREBASE_TOKEN_HERE",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://us-central1-guestbuddy-test-3b36d.cloudfunctions.net",
			"type": "string"
		}
	]
} 